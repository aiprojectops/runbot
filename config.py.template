# ==============================================
# ğŸ“ Config Template
# ==============================================
# ì´ íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ config.pyë¥¼ ìƒì„±í•˜ì„¸ìš”.
# setup/setup.pyë¥¼ ì‹¤í–‰í•˜ë©´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.

import os
from dotenv import load_dotenv

# í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
load_dotenv()

def get_required_env(key: str) -> str:
    """í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ ê°€ì ¸ì˜¤ê¸° (ì—†ìœ¼ë©´ ì—ëŸ¬)"""
    value = os.getenv(key)
    if not value:
        raise ValueError(f"í™˜ê²½ ë³€ìˆ˜ '{key}'ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. .env íŒŒì¼ì„ í™•ì¸í•˜ì„¸ìš”.")
    return value

# ==============================================
# 1. OpenAI ì„¤ì •
# ==============================================
OPENAI_API_KEY = get_required_env("OPENAI_API_KEY")

# ==============================================
# 2. Supabase ì„¤ì •
# ==============================================
SUPABASE_URL = get_required_env("SUPABASE_URL")
SUPABASE_SERVICE_ROLE_KEY = get_required_env("SUPABASE_SERVICE_ROLE_KEY")
SUPABASE_TABLE_NAME = "mysql_data_embeddings"
SUPABASE_QUERY_NAME = "match_mysql_embeddings"

# ==============================================
# 3. cafe24 MySQL ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
# ==============================================
CAFE24_DB_CONFIG = {
    "host": os.getenv("CAFE24_DB_HOST"),
    "port": int(os.getenv("CAFE24_DB_PORT", "3306")),
    "user": os.getenv("CAFE24_DB_USER"),
    "password": os.getenv("CAFE24_DB_PASSWORD"),
    "database": os.getenv("CAFE24_DB_DATABASE"),
    "charset": os.getenv("CAFE24_DB_CHARSET", "utf8mb4")
}

# MySQL ì§ì ‘ ì—°ê²° ì‚¬ìš© ì—¬ë¶€
USE_MYSQL_CONNECTION = os.getenv("USE_MYSQL_CONNECTION", "True").lower() == "true"

# ==============================================
# 4. ë°ì´í„° ì¶”ì¶œ ì„¤ì • (JSON íŒŒì¼ìš©)
# ==============================================
# setup/file_processor_v2.pyë¥¼ ì‹¤í–‰í•˜ë©´ data/processed_data.jsonì´ ìƒì„±ë©ë‹ˆë‹¤.
DATA_EXTRACTION_CONFIG = {
    "processed_data": {
        "json_file": "data/processed_data.json",
        "table": "processed_data",
        "columns": ["id", "content", "metadata"],
        "text_columns": ["content"],
        "metadata_columns": ["id", "metadata"]
    }
}

# ==============================================
# 5. ì„ë² ë”© ì„¤ì •
# ==============================================
EMBEDDING_CONFIG = {
    "model": "text-embedding-3-small",
    "chunk_size": 500,
    "chunk_overlap": 50
}

# ==============================================
# 6. LLM ì„¤ì •
# ==============================================
LLM_CONFIG = {
    "model": "gpt-4o-mini",
    "temperature": 0.3,
    "max_tokens": 1000
}

# ==============================================
# 7. ê²€ìƒ‰ ì„¤ì •
# ==============================================
RETRIEVAL_CONFIG = {
    "k": 5,  # ê²€ìƒ‰í•  ë¬¸ì„œ ê°œìˆ˜
    "hybrid_weight": 0.7  # ë²¡í„° ê²€ìƒ‰ ê°€ì¤‘ì¹˜ (0~1)
}

